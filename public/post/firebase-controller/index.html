
<!DOCTYPE html>
<html lang="en-us">
<head>

  
  <meta charset="UTF-8">
  <title>
    KMHFirebaseController: A Cleaner API For Firebase | Blog • Ken M. Haggerty
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="http://kenmhaggerty.com/blog/post/firebase-controller/"/>

  
  <link rel="stylesheet" href="http://kenmhaggerty.com/blog/css/sanitize.css">
  <link rel="stylesheet" href="http://kenmhaggerty.com/blog/css/responsive.css">
  <link rel="stylesheet" href="http://kenmhaggerty.com/blog/css/highlight_monokai.css">
  <link rel="stylesheet" href="http://kenmhaggerty.com/blog/css/theme.css">
  <link rel="stylesheet" href="http://kenmhaggerty.com/blog/css/custom.css">
  
  
  <link href="http://kenmhaggerty.com/blog/index.xml" rel="alternate" type="application/rss+xml" title="Blog • Ken M. Haggerty" />
  <link href="http://kenmhaggerty.com/blog/index.xml" rel="feed" type="application/rss+xml" title="Blog • Ken M. Haggerty" />

  
  

  
  
     <meta property="og:image" content="http://kenmhaggerty.com/blog/images/firebase-controller/hero.png"/>
  

  
  <meta name="twitter:card" content="summary_large_image">
  
    <meta name="twitter:site" content="@kenmhaggerty">
    <meta name="twitter:creator" content="@kenmhaggerty">
  
  <meta name="twitter:title" content="KMHFirebaseController: A Cleaner API For Firebase | Blog • Ken M. Haggerty">
  <meta name="twitter:description" content="Firebase is an easy-to-use cross-platform NoSQL database, but even &#34;easy-to-use&#34; solutions can be &#34;tiresome-to-learn&#34; and messy when you&#39;re used to other tools. As such, I&#39;ve created my own custom interface to make integrating Firebase into your iOS app even easier!">
  
    <meta name="twitter:image" content="http://kenmhaggerty.com/blog/images/firebase-controller/hero.png">
  

</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="http://kenmhaggerty.com/blog/">Blog • Ken M. Haggerty</a></h1>
        
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="http://kenmhaggerty.com">Home</a></li>
          <li><a href="https://twitter.com/kenmhaggerty">Twitter</a></li>
          
          <li><a href="https://github.com/kenmhaggerty">GitHub</a></li>
          <li><a href="http://kenmhaggerty.com/blog/index.xml" type="application/rss+xml">RSS</a></li>
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1><a href=".">KMHFirebaseController: A Cleaner API For Firebase</a></h1>
      <div class="meta">
        Jul 18, 2016 &nbsp;
        
      </div>
    </div>
    <article>
      

<div class="figure">
<img src="/blog/images/firebase-controller/firebase_apple.png">
</div>

<p><a href="https://firebase.google.com/"><strong>Firebase</strong></a> is an easy-to-use cross-platform <a href="https://en.wikipedia.org/wiki/NoSQL">NoSQL</a> database, but even &ldquo;easy-to-use&rdquo; solutions can be &ldquo;tiresome-to-learn&rdquo; and messy when you&rsquo;re used to other tools. While Firebase&rsquo;s existing API is pretty robust, there are definitely some quirks to how it operates. As such, I&rsquo;ve created my own custom interface to make integrating Firebase into your iOS app <em>even easier!</em></p>

<p>This custom class&mdash;called, simply enough, <a href="https://github.com/kenmhaggerty/KMHFirebaseController"><strong>KMHFirebaseController</strong></a>&mdash;is <a href="https://github.com/kenmhaggerty/KMHFirebaseController">available on GitHub</a>. In the past I&rsquo;ve generally kept tools like these to myself (mostly out of lack-of-confidence), but in open sourcing this code I hope I can receive constructive criticism and recommendations for improvement. So fork away and submit your pull requests! :)</p>

<p><strong>KMHFirebaseController</strong> contains class methods for setting up your Firebase project; pushing values to Firebase; querying Firebase; and observing Firebase. This library also includes a helper class called  <strong>KMHFirebaseQuery</strong> for use in creating Firebase queries.</p>

<p>The <a href="https://github.com/kenmhaggerty/KMHFirebaseController/blob/master/KMHFirebaseController.h">KMHFirebaseController.h</a> file contains the full API, divided into the four general sections listed above and outlined below. Since my API is built on top of the existing Firebase iOS SDK, here is a link to the actual <a href="https://firebase.google.com/docs/reference/ios/">Firebase iOS SDK documentation</a>, which I would still recommend familiarizing yourself with.</p>

<p>This current version of KMHFirebaseController is compatible with Firebase 3.0 and later and written in Objective-C, but I&rsquo;m hoping to push a backwards-compatible version soon in addition to an implementation in Swift.</p>

<p>And don&rsquo;t forget to add Firebase to your project by following the <a href="https://firebase.google.com/docs/ios/setup"><strong>Get Started Guide</strong></a>!</p>

<h1 id="kmhfirebasecontroller">KMHFirebaseController</h1>

<h2 id="general-methods">General Methods</h2>

<h4 id="void-setup">+ (void)setup</h4>

<p>Performs necessary application setup for Firebase and KMHFirebaseController; should be called from within <code>-[UIApplicationDelegate application:didFinishLaunchingWithOptions:]</code>.</p>

<h4 id="bool-isconnected">+ (BOOL)isConnected</h4>

<p>Returns whether there is currently an active connection to Firebase.</p>

<h4 id="void-connect">+ (void)connect</h4>

<p>Enables a connection to Firebase if it has been previously disabled.</p>

<h4 id="void-disconnect">+ (void)disconnect</h4>

<p>Disables a connection to Firebase if it is currently active.</p>

<h2 id="data-methods">Data Methods</h2>

<h4 id="void-setpriority-id-priority-forpath-nsstring-path-withcompletion-void-bool-success-nserror-error-completionblock">+ (void)setPriority:(id)priority forPath:(NSString *)path withCompletion:(void(^)(BOOL success, NSError *error))completionBlock</h4>

<p>As per <a href="https://firebase.google.com/docs/reference/ios/firebasedatabase/interface_f_i_r_database_reference#a137281e08179107ae2d575328facf825">Firebase&rsquo;s documentation</a>, priorities can be set per path to determine the order in which updates occur should sibling paths update simultaneously. Paths with no priority are processed first, followed by paths with numeric priorities and finally paths with string priorities.</p>

<h4 id="void-saveobject-id-object-topath-nsstring-path-withcompletion-void-bool-success-nserror-error-completionblock">+ (void)saveObject:(id)object toPath:(NSString *)path withCompletion:(void (^)(BOOL success, NSError *error))completionBlock</h4>

<p>Overwrites the object at the specified path with the given object and performs the given block upon completion. Valid object types include strings (NSString) and numbers and booleans (NSNumber). Setting the object for path to nil will remove that path from Firebase.</p>

<h4 id="void-updateobjectatpath-nsstring-path-withdictionary-nsdictionary-dictionary-andcompletion-void-bool-success-nserror-error-completionblock">+ (void)updateObjectAtPath:(NSString *)path withDictionary:(NSDictionary *)dictionary andCompletion:(void (^)(BOOL success, NSError *error))completionBlock</h4>

<p>Sets the provided JSON object (NSDictionary) to the given path, overwriting existing objects at specified paths but leaving unspecified children objects untouched.</p>

<h4 id="void-setofflinevalue-id-offlinevalue-forobjectatpath-nsstring-path-withpersistence-bool-persist-andcompletion-void-bool-success-nserror-error-completionblock">+ (void)setOfflineValue:(id)offlineValue forObjectAtPath:(NSString *)path withPersistence:(BOOL)persist andCompletion:(void (^)(BOOL success, NSError *error))completionBlock</h4>

<p>Firebase can automatically set an object to a path when the device&rsquo;s connection to Firebase goes offline. However, in the stock API this actions is performed only once. This method allows you to persist an offline value that will be set to the provided path each and every time your device disconnects from Firebase.</p>

<h4 id="void-setonlinevalue-id-onlinevalue-forobjectatpath-nsstring-path-withpersistence-bool-persist">+ (void)setOnlineValue:(id)onlineValue forObjectAtPath:(NSString *)path withPersistence:(BOOL)persist</h4>

<p>Firebase can automatically set an object to a path when the device&rsquo;s connection to Firebase is established. However, in the stock API this actions is performed only once. This method allows you to persist an online value that will be set to the provided path each and every time your device connects to Firebase.</p>

<h4 id="void-persistonlinevalueforobjectatpath-nsstring-path">+ (void)persistOnlineValueForObjectAtPath:(NSString *)path</h4>

<p>This method, when called while an active Firebase connection is present, allows you to persist and resume the current value at the specified path whenever the device is connected to Firebase. If this method is not called while an offline value is set for the path, the prior value will not be re-set upon connection to Firebase.</p>

<h4 id="void-clearofflinevalueforobjectatpath-nsstring-path">+ (void)clearOfflineValueForObjectAtPath:(NSString *)path</h4>

<p>If an offline value has been set for the given path, this method will clear it.</p>

<h4 id="void-clearonlinevalueforobjectatpath-nsstring-path">+ (void)clearOnlineValueForObjectAtPath:(NSString *)path</h4>

<p>If an online value has been set for the given path, this method will clear it.</p>

<h4 id="void-clearpersistedvalueforobjectatpath-nsstring-path">+ (void)clearPersistedValueForObjectAtPath:(NSString *)path</h4>

<p>If a persisted value has been set for the given path, this method will clear it.</p>

<h2 id="query-methods">Query Methods</h2>

<h4 id="void-getobjectatpath-nsstring-path-withcompletion-void-id-object-completionblock">+ (void)getObjectAtPath:(NSString *)path withCompletion:(void (^)(id object))completionBlock</h4>

<p>Returns the object at the specified path via the completion handler.</p>

<h4 id="void-getobjectsatpath-nsstring-path-withqueries-nsarray-kmhfirebasequery-queries-andcompletion-void-id-result-completionblock">+ (void)getObjectsAtPath:(NSString *)path withQueries:(NSArray <KMHFirebaseQuery *> *)queries andCompletion:(void (^)(id result))completionBlock</h4>

<p>Returns all child objects of the specified path matching the provided query constraints via the completion handler. Note that in order for this method not to error the authenticated user must have read access to all descendants of the specified path including children-of-children.</p>

<h2 id="observer-methods">Observer Methods</h2>

<p><em>N.b. For all observer methods, an object or child object must exist at the specified path in order to add an observer. In contrast to the stock API, methods below will call the provided responder blocks exactly once per update and will not call blocks when observers are initially added. Also in contrast with the stock API, the methods below allow for only one responder block per path per observation type (i.s., value changed, child added, child changed, and child removed).</em></p>

<h4 id="void-observevaluechangedatpath-nsstring-path-withblock-void-id-value-block">+ (void)observeValueChangedAtPath:(NSString *)path withBlock:(void (^)(id value))block</h4>

<p>Adds an observer at the specified path that will trigger the provided block when the object at the given path is changed.</p>

<h4 id="void-observechildaddedatpath-nsstring-path-withblock-void-id-child-block">+ (void)observeChildAddedAtPath:(NSString *)path withBlock:(void (^)(id child))block</h4>

<p>Adds an observer at the specified path that will trigger the provided block when any number of child objects are added at the given path.</p>

<h4 id="void-observechildchangedatpath-nsstring-path-withblock-void-id-child-block">+ (void)observeChildChangedAtPath:(NSString *)path withBlock:(void (^)(id child))block</h4>

<p>Adds an observer at the specified path that will trigger the provided block when any child object at the given path changes.</p>

<h4 id="void-observechildremovedfrompath-nsstring-path-withblock-void-id-child-block">+ (void)observeChildRemovedFromPath:(NSString *)path withBlock:(void (^)(id child))block</h4>

<p>Adds an observer at the specified path that will trigger the provided block when any child object of the given path is removed.</p>

<h4 id="void-removevaluechangedobserveratpath-nsstring-path">+ (void)removeValueChangedObserverAtPath:(NSString *)path</h4>

<p>Removes the &ldquo;value changed&rdquo; observer from the given path.</p>

<h4 id="void-removechildaddedobserveratpath-nsstring-path">+ (void)removeChildAddedObserverAtPath:(NSString *)path</h4>

<p>Removes the &ldquo;child added&rdquo; observer from the given path.</p>

<h4 id="void-removechildchangedobserveratpath-nsstring-path">+ (void)removeChildChangedObserverAtPath:(NSString *)path</h4>

<p>Removes the &ldquo;child changed&rdquo; observer from the given path.</p>

<h4 id="void-removechildremovedobserveratpath-nsstring-path">+ (void)removeChildRemovedObserverAtPath:(NSString *)path</h4>

<p>Removes the &ldquo;child removed&rdquo; observer from the given path.</p>

      
      
      
    </article>
    


  </main>
  
  <nav class="pagination-single">
    
      <span class="previous">&larr; <a href="http://kenmhaggerty.com/blog/post/animating-tableview-updates/" rel="prev">A Better Way To Animate Table View Updates</a></span>
    
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      Written by Ken M. Haggerty • 2016
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



</body>
</html>

